<div class="w-full mx-auto bg-white rounded-xl shadow-lg p-8">
  <div class="flex justify-between items-center mb-4">
    <div>
      <h2 class="font-bold text-2xl leading-tight mb-1 text-neutral-800">Meus pedidos</h2>
      <p class="text-neutral-500 text-base">veja suas corridas/entregas aceitas.</p>
    </div>
  </div>
  <form method="get" class="order-list__filter mb-6" data-controller="order-filter" data-order-filter-target="form">
    <div class="order-list__filter-group flex flex-wrap gap-4 items-end">
      <div>
        <label class="block text-sm font-semibold text-neutral-700 mb-1" for="type_order">Tipo</label>
        <select name="type_order" id="type_order" class="border rounded-lg px-3 py-2 bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-neutral-300">
          <option value="">Todos</option>
          <option value="ride" <%= 'selected' if params[:type_order] == 'ride' %>>Corrida</option>
          <option value="delivery" <%= 'selected' if params[:type_order] == 'delivery' %>>Entrega</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-semibold text-neutral-700 mb-1" for="order_status">Status</label>
        <select name="order_status" id="order_status" class="border rounded-lg px-3 py-2 bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-neutral-300">
          <option value="">Todos</option>
          <option value="pending" <%= 'selected' if params[:order_status] == 'pending' %>>Pendente</option>
          <option value="aceito" <%= 'selected' if params[:order_status] == 'aceito' %>>Aceito</option>
          <option value="finalizado" <%= 'selected' if params[:order_status] == 'finalizado' %>>Finalizado</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-semibold text-neutral-700 mb-1" for="driver_name">Motorista</label>
        <input type="text" name="driver_name" id="driver_name" value="<%= params[:driver_name] %>" placeholder="Nome do motorista" class="border rounded-lg px-3 py-2 bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-neutral-300" />
      </div>
      <div>
        <button type="submit" class="ml-2 px-5 py-2 rounded-lg bg-neutral-800 text-white font-semibold hover:bg-neutral-700 transition">Filtrar</button>
      </div>
    </div>
  </form>
  <div class="overflow-x-auto">
  <table class="order-list__table min-w-full">
      <thead>
        <tr>
          <th>Tipo</th>
          <th>Origem</th>
          <th>Destino</th>
          <th>Status</th>
          <th>Motorista</th>
          <th>Descrição</th>
        </tr>
      </thead>
      <tbody class="order-list__table--zebra">
        <% if orders.present? %>
          <% orders.each_with_index do |order, idx| %>
            <tr>
              <td>
                <span><%= order.type_order.presence || '-' %></span>
              </td>
              <td><%= order.departure_address.presence || '-' %></td>
              <td><%= order.destination_address.presence || '-' %></td>
              <td>
                <% status = order.order_status.presence || '-' %>
                <% badge_bem =
                  case status
                  when 'pending' then 'order-list__badge order-list__badge--pending'
                  when 'aceito', 'accepted' then 'order-list__badge order-list__badge--accepted'
                  when 'finalizado' then 'order-list__badge order-list__badge--finalizado'
                  else 'order-list__badge order-list__badge--default'
                  end
                %>
                <span class="<%= badge_bem %>"><%= status.capitalize %></span>
              </td>
              <td><%= order.driver&.name.presence || '-' %></td>
              <td><%= order.description_items.presence || '-' %></td>
            </tr>
          <% end %>
        <% else %>
          <tr>
            <td colspan="6" class="text-center text-neutral-400 py-8 text-lg">Nenhum pedido encontrado.</td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <div class="flex justify-center mt-8">
      <%= paginate @orders %>
    </div>
  </div>
</div>

